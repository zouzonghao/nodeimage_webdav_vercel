<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NodeImage WebDAV</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <div id="app">
        <header>
            <h1>NodeImage WebDAV</h1>
            <p>NodeImage备份同步服务管理面板</p>
        </header>

        <main>
            <section class="card">
                <div class="card-header">
                    <h2>实时日志</h2>
                    <button id="clear-log-btn" class="btn-icon">
                        清除日志
                    </button>
                </div>
                <div id="log-container"></div>
            </section>

            <div class="controls-grid">
                <section class="card">
                    <h2>手动操作</h2>
                    <div class="actions-container">
                        <button id="incremental-sync-btn" class="btn-primary">
                            增量同步 (API Key)
                        </button>
                        <button id="full-sync-btn" class="btn-danger">
                            全量同步 (Cookie)
                        </button>
                    </div>
                    <div class="sync-description">
                        <p><strong>增量同步:</strong> 扫描 NodeImage 中最新的50张图片，验证 webdav 中是否存在。此操作仅添加新图片，不会修改或删除 WebDAV 上的已有的图片。</p>
                        <p><strong>全量同步:</strong> 对比 NodeImage 中的所有图片与 WebDAV 中的内容，执行完全同步。此操作将确保 WebDAV 的图片与 NodeImage 完全一致，包括添加缺失的图片和删除多余的文件。</p>
                    </div>
                    <div id="sync-action-message" class="action-message"></div>
                </section>
    
                <section class="card">
                    <h2>NodeImage Cookie (用于全量同步)</h2>
                    <div class="cookie-setting">
                        <a href="https://www.nodeimage.com/" target="_blank">前往 NodeImage 获取 Cookie</a>
                        <textarea id="cookie-input" rows="4" placeholder="可在此处覆盖后端设置的 Cookie"></textarea>
                    </div>
                    <button id="save-cookie-btn" class="btn-secondary">
                        保存 Cookie
                    </button>
                    <div id="config-action-message" class="action-message"></div>
                </section>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>